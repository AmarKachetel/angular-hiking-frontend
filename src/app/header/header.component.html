<mat-toolbar color="primary" class="mat-elevation-z4">
    <div class="brand" (click)="handleLogoClick()">
        <img src="assets/icons/Randinou.png" alt="Hiking Icon" class="brand-icon">
        <div class="brand-text">
            <span class="brand-title">Randinou <span class="brand-highlight">Adventures</span></span>
            <span class="brand-subtitle">Préparer et partager ses randos</span>
        </div>
    </div>

    <span class="spacer"></span>
    <button mat-button class="toolbar-button">Tracer un circuit</button>
    <button mat-button class="toolbar-button" [routerLink]="['/randos']">Randonnées</button>
    <button mat-button class="toolbar-button" [routerLink]="['/contact']">Contact</button>
    <button mat-button class="toolbar-button">Club Visorando</button>

    <ng-container *ngIf="isLoggedIn; else guestLinks">
        <!-- Menu utilisateur -->
        <div class="user-menu" (clickOutside)="closeMenu()" [ngClass]="{'open': menuOpen}">
            <button mat-button class="toolbar-button" (click)="toggleMenu()">{{ username }}</button>
            <div *ngIf="menuOpen" class="dropdown-menu">
                <ul>
                    <li (click)="navigateTo('user-randos')">Mes Randonnées</li>
                    <li (click)="navigateTo('photos')">Mes Photos</li>
                    <li (click)="navigateTo('posts')">Mes Posts</li>
                    <li (click)="navigateTo('profile')">Mon Profil</li>
                    <li (click)="logout()">Déconnexion</li>
                </ul>
            </div>
        </div>

        <!-- Menu administrateur -->
        <div *ngIf="isAdmin" class="admin-menu">
            <button mat-button class="toolbar-button" (click)="toggleAdminMenu()">Admin Menu</button>
            <div *ngIf="adminMenuOpen" class="dropdown-menu">
                <ul>
                    <li [routerLink]="['/admin/validate-user']">Validate User</li>
                    <li (click)="navigateTo('admin/manage-randos')">Manage Randos</li>
                    <li (click)="navigateTo('admin/moderate-reviews')">Moderate Reviews</li>
                </ul>
            </div>
        </div>
    </ng-container>

    <ng-template #guestLinks>
        <a mat-button class="toolbar-button" [routerLink]="['/register']">Inscription</a>
        <a mat-button class="toolbar-button" [routerLink]="['/login']">Connexion</a>
    </ng-template>
</mat-toolbar>
